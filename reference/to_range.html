<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert Vectors to Range String — to_range • DO.utils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert Vectors to Range String — to_range"><meta name="description" content="Converts vectors to a string of ranges. All vector types are accepted and the
original values will appear in the final output range, but where input is not
a numeric vector of whole numbers, a function to convert
the values to integers must be provided (int_fn) for the purpose of
identifying the range(s)."><meta property="og:description" content="Converts vectors to a string of ranges. All vector types are accepted and the
original values will appear in the final output range, but where input is not
a numeric vector of whole numbers, a function to convert
the values to integers must be provided (int_fn) for the purpose of
identifying the range(s)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DO.utils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/obtain_use_records.html">Assessing Resource Use: Obtaining Use Records</a></li>
    <li><a class="dropdown-item" href="../articles/use-reticulate-python.html">Using DO.utils with reticulate and Python</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert Vectors to Range String</h1>

      <div class="d-none name"><code>to_range.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Converts vectors to a string of ranges. All vector types are accepted and the
original values will appear in the final output range, but where input is not
a numeric vector of <a href="is_whole_number()">whole numbers</a>, a function to convert
the values to integers must be provided (<code>int_fn</code>) for the purpose of
identifying the range(s).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">to_range</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  int_fn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  sep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">","</span>, <span class="st">"-"</span><span class="op">)</span>,</span>
<span>  start_rm <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_rm <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A numeric vector of <a href="is_whole_number()">whole numbers</a>.</p></dd>


<dt id="arg-int-fn">int_fn<a class="anchor" aria-label="anchor" href="#arg-int-fn"></a></dt>
<dd><p>A function (or tidyverse-style formula) to convert <code>x</code> into an
integer vector, used <em>ONLY for creating ranges</em>; the original value will
appear in the range except where modified by <code>start_rm</code> and/or <code>end_rm</code>.
<code>int_fun</code> is required when <code>x</code> is not a numeric vector.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code>int_fn</code>.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>The separators to use between ranges (default: ',') and within
a range (default: '-'), as a length-2 character vector.</p></dd>


<dt id="arg-start-rm">start_rm<a class="anchor" aria-label="anchor" href="#arg-start-rm"></a></dt>
<dd><p>A regular expression to remove from <code>x</code> values at the
<em>beginning</em> of a range.</p></dd>


<dt id="arg-end-rm">end_rm<a class="anchor" aria-label="anchor" href="#arg-end-rm"></a></dt>
<dd><p>A regular expression to remove from <code>x</code> values at the
<em>end</em> of a range.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The range(s) formatted as a string or <code>NA</code> if the input is an empty vector.</p>
    </div>
    <div class="section level2">
    <h2 id="notes">Notes<a class="anchor" aria-label="anchor" href="#notes"></a></h2>


<ul><li><p><code>NA</code> values are always dropped.</p></li>
<li><p><code>to_range()</code> was inspired by answers at
https://stackoverflow.com/q/16911773/6938922, most heavily by speendo
(CC-BY-SA 3.0, accessed 2022-07-01). This is the fastest approach with
few inputs but is significantly slower than other answers for large inputs.
The internal approach will likely be modified in the future, but arguments
and output will remain the same.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">8</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">4</span>, <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">20</span><span class="op">:</span><span class="fl">37</span>, <span class="fl">4</span>, <span class="fl">40</span>, <span class="fl">43</span>, <span class="fl">45</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2,-1,1,2,4,6-8,20-37,40,43,45"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `NA` values are dropped</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">7</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2,-1,1,2,4,6-8,20-37,40,43,45"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use `int_fn` when `x` is not a numeric vector (tidyverse-style formulas</span></span></span>
<span class="r-in"><span><span class="co">#    accepted)</span></span></span>
<span class="r-in"><span><span class="va">x_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">x</span>, int_fn <span class="op">=</span> <span class="va">as.integer</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2,-1,1,2,4,6-8,20-37,40,43,45"</span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">x</span>, int_fn <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2,-1,1,2,4,6-8,20-37,40,43,45"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `int_fn` allows non-numeric ranges to be created</span></span></span>
<span class="r-in"><span><span class="va">txt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"txt"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">to_int</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">txt</span>, <span class="va">to_int</span>, y <span class="op">=</span> <span class="st">"txt"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2txt,-1txt,1txt,2txt,4txt,6txt-8txt,20txt-37txt,40txt,43txt,45txt"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># text can be selectively removed from the values at the beginning of ranges</span></span></span>
<span class="r-in"><span><span class="co">#     (`start_rm`) or end of ranges (`end_rm`)</span></span></span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">txt</span>, <span class="va">to_int</span>, start_rm <span class="op">=</span> <span class="st">"txt"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2txt,-1txt,1txt,2txt,4txt,6-8txt,20-37txt,40txt,43txt,45txt"</span>
<span class="r-in"><span><span class="fu">to_range</span><span class="op">(</span><span class="va">txt</span>, <span class="va">to_int</span>, end_rm <span class="op">=</span> <span class="st">"txt"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "-2txt,-1txt,1txt,2txt,4txt,6txt-8,20txt-37,40txt,43txt,45txt"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by J. Allen Baron.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

